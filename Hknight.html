<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Hollow Knight Mini-Demo</title>
    <style>
        body {
            margin: 0;
            overflow: hidden;
            background-color: #0a0a0f; /* Deep blue-black */
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        canvas {
            border: 2px solid #2d3436;
            box-shadow: 0 0 20px rgba(0,0,0,0.5);
        }
        #ui {
            position: absolute;
            top: 20px;
            left: 20px;
            color: #dfe6e9;
            pointer-events: none;
        }
    </style>
</head>
<body>

<div id="ui">
    <h1>Forgotten Crossroads</h1>
    <p>Move: <b>WASD / Arrows</b> | Jump: <b>Space</b></p>
</div>
<canvas id="gameCanvas"></canvas>

<script>
    const canvas = document.getElementById('gameCanvas');
    const ctx = canvas.getContext('2d');

    canvas.width = 800;
    canvas.height = 500;

    // Game Constants
    const gravity = 0.8;
    const friction = 0.8;

    // Player Object
    const player = {
        x: 100,
        y: 300,
        width: 30,
        height: 45,
        dx: 0,
        dy: 0,
        speed: 5,
        jumpPower: -15,
        grounded: false,
        color: '#ffffff'
    };

    // Level Platforms
    const platforms = [
        { x: 0, y: 450, w: 800, h: 50 },    // Floor
        { x: 150, y: 350, w: 150, h: 20 },  // Platform 1
        { x: 450, y: 280, w: 200, h: 20 },  // Platform 2
        { x: 100, y: 200, w: 100, h: 20 }   // Platform 3
    ];

    const keys = {};

    window.addEventListener('keydown', e => keys[e.code] = true);
    window.addEventListener('keyup', e => keys[e.code] = false);

    function update() {
        // Horizontal Movement
        if (keys['ArrowRight'] || keys['KeyD']) {
            if (player.dx < player.speed) player.dx++;
        } else if (keys['ArrowLeft'] || keys['KeyA']) {
            if (player.dx > -player.speed) player.dx--;
        } else {
            player.dx *= friction; // Slide to a stop
        }

        // Jump
        if ((keys['Space'] || keys['ArrowUp'] || keys['KeyW']) && player.grounded) {
            player.dy = player.jumpPower;
            player.grounded = false;
        }

        // Apply Gravity
        player.dy += gravity;
        player.x += player.dx;
        player.y += player.dy;

        // Platform Collision
        player.grounded = false;
        for (let plat of platforms) {
            if (player.x < plat.x + plat.w &&
                player.x + player.width > plat.x &&
                player.y + player.height > plat.y &&
                player.y + player.height < plat.y + plat.dy + 20) { 
                
                // Reset position to top of platform
                player.grounded = true;
                player.dy = 0;
                player.y = plat.y - player.height;
            }
        }

        // Boundary checks
        if (player.x < 0) player.x = 0;
        if (player.x + player.width > canvas.width) player.x = canvas.width - player.width;
    }

    function drawKnight(x, y) {
        // Cloak
        ctx.fillStyle = "#3d3d5c";
        ctx.beginPath();
        ctx.moveTo(x, y + 20);
        ctx.lineTo(x + 30, y + 20);
        ctx.lineTo(x + 15, y + 45);
        ctx.fill();

        // Head/Mask
        ctx.fillStyle = "white";
        ctx.beginPath();
        ctx.ellipse(x + 15, y + 15, 15, 18, 0, 0, Math.PI * 2);
        ctx.fill();

        // Horns
        ctx.beginPath();
        ctx.moveTo(x + 5, y + 5);
        ctx.lineTo(x, y - 10);
        ctx.lineTo(x + 12, y + 5);
        ctx.fill();

        ctx.beginPath();
        ctx.moveTo(x + 25, y + 5);
        ctx.lineTo(x + 30, y - 10);
        ctx.lineTo(x + 18, y + 5);
        ctx.fill();

        // Eyes
        ctx.fillStyle = "black";
        ctx.beginPath();
        ctx.arc(x + 9, y + 15, 3, 0, Math.PI * 2);
        ctx.arc(x + 21, y + 15, 3, 0, Math.PI * 2);
        ctx.fill();
    }

    function draw() {
        // Clear screen
        ctx.clearRect(0, 0, canvas.width, canvas.height);

        // Draw Background "Vignette"
        const gradient = ctx.createRadialGradient(400, 250, 50, 400, 250, 400);
        gradient.addColorStop(0, '#1e1e2f');
        gradient.addColorStop(1, '#050508');
        ctx.fillStyle = gradient;
        ctx.fillRect(0, 0, canvas.width, canvas.height);

        // Draw Platforms
        ctx.fillStyle = '#2d3436';
        for (let plat of platforms) {
            ctx.fillRect(plat.x, plat.y, plat.w, plat.h);
            // Simple texture/line on top
            ctx.strokeStyle = '#636e72';
            ctx.strokeRect(plat.x, plat.y, plat.w, 2);
        }

        // Draw Knight
        drawKnight(player.x, player.y);

        requestAnimationFrame(() => {
            update();
            draw();
        });
    }

    draw();
</script>
</body>
</html>
